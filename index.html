<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·ª®ng D·ª•ng M√£ H√≥a Tin Nh·∫Øn - AES & QR Code</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Th∆∞ vi·ªán CryptoJS cho m√£ h√≥a AES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <!-- Th∆∞ vi·ªán QRCode.js ƒë·ªÉ t·∫°o QR code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- Th∆∞ vi·ªán HTML5-QRCode ƒë·ªÉ qu√©t QR code -->
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîê ·ª®ng D·ª•ng M√£ H√≥a Tin Nh·∫Øn</h1>
            <p class="subtitle">B·∫£o m·∫≠t tin nh·∫Øn v·ªõi AES-256 v√† QR Code</p>
        </header>

        <!-- Tab Navigation -->
        <div class="tabs">
            <button class="tab-button active" data-tab="encrypt">üìù M√£ H√≥a</button>
            <button class="tab-button" data-tab="decrypt">üîì Gi·∫£i M√£</button>
            <button class="tab-button" data-tab="scanner">üì∑ Qu√©t QR</button>
            <button class="tab-button" data-tab="history">üìú L·ªãch S·ª≠</button>
            <button class="tab-button" data-tab="settings">‚öôÔ∏è C√†i ƒê·∫∑t</button>
        </div>

        <!-- Tab 1: M√£ h√≥a tin nh·∫Øn -->
        <div id="encrypt-tab" class="tab-content active">
            <div class="section">
                <h2>M√£ H√≥a Tin Nh·∫Øn</h2>
                <div class="form-group">
                    <label for="messageInput">üì© Tin nh·∫Øn c·ªßa b·∫°n:</label>
                    <textarea id="messageInput" rows="5" placeholder="Nh·∫≠p tin nh·∫Øn mu·ªën m√£ h√≥a..."></textarea>
                </div>
                <div class="form-group">
                    <label for="encryptKey">üîë M·∫≠t kh·∫©u chung (8-32 k√Ω t·ª±):</label>
                    <div class="password-input-group">
                        <input type="password" id="encryptKey" placeholder="Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ m√£ h√≥a" maxlength="32"/>
                        <button type="button" id="toggleEncryptPassword" class="btn-icon" title="Hi·ªán/·∫®n m·∫≠t kh·∫©u">üëÅÔ∏è</button>
                        <button type="button" id="generatePassword" class="btn-icon" title="T·∫°o m·∫≠t kh·∫©u ng·∫´u nhi√™n">üé≤</button>
                    </div>
                    <div id="passwordStrength" class="password-strength"></div>
                    <small>‚ö†Ô∏è B·∫°n v√† ng∆∞·ªùi nh·∫≠n ph·∫£i bi·∫øt m·∫≠t kh·∫©u n√†y!</small>
                </div>
                <div class="form-group">
                    <label for="expiryTime">‚è±Ô∏è Th·ªùi gian h·∫øt h·∫°n tin nh·∫Øn:</label>
                    <select id="expiryTime">
                        <option value="0">Kh√¥ng gi·ªõi h·∫°n</option>
                        <option value="300">5 ph√∫t</option>
                        <option value="1800">30 ph√∫t</option>
                        <option value="3600">1 gi·ªù</option>
                        <option value="86400">24 gi·ªù</option>
                        <option value="604800">7 ng√†y</option>
                    </select>
                </div>
                <button id="encryptButton" class="btn-primary">üîí M√£ H√≥a & T·∫°o QR Code</button>
                
                <div id="encryptResult" class="result-section" style="display: none;">
                    <h3>‚úÖ M√£ H√≥a Th√†nh C√¥ng!</h3>
                    <div class="encrypted-text">
                        <label>Tin nh·∫Øn ƒë√£ m√£ h√≥a:</label>
                        <textarea id="encryptedText" readonly rows="3"></textarea>
                        <div class="button-group">
                            <button id="copyButton" class="btn-secondary">üìã Sao ch√©p</button>
                            <button id="shareButton" class="btn-secondary">üì§ Chia s·∫ª Link</button>
                            <button id="saveHistory" class="btn-secondary">üíæ L∆∞u v√†o L·ªãch S·ª≠</button>
                        </div>
                    </div>
                    <div class="qr-container">
                        <label>QR Code (qu√©t ƒë·ªÉ gi·∫£i m√£):</label>
                        <div id="qrCodeDisplay"></div>
                        <button id="downloadQR" class="btn-secondary">üíæ T·∫£i QR Code</button>
                    </div>
                    <div class="warning-box">
                        <p>‚ö° <strong>T√≠nh nƒÉng t·ª± h·ªßy:</strong></p>
                        <label>
                            <input type="checkbox" id="selfDestruct" />
                            X√≥a tin nh·∫Øn sau khi hi·ªÉn th·ªã QR Code (5 gi√¢y)
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Gi·∫£i m√£ th·ªß c√¥ng -->
        <div id="decrypt-tab" class="tab-content">
            <div class="section">
                <h2>Gi·∫£i M√£ Tin Nh·∫Øn</h2>
                <div class="form-group">
                    <label for="encryptedInput">üîí Tin nh·∫Øn ƒë√£ m√£ h√≥a:</label>
                    <textarea id="encryptedInput" rows="3" placeholder="D√°n tin nh·∫Øn ƒë√£ m√£ h√≥a v√†o ƒë√¢y..."></textarea>
                </div>
                <div class="form-group">
                    <label for="decryptKey">üîë M·∫≠t kh·∫©u chung:</label>
                    <input type="password" id="decryptKey" placeholder="Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ gi·∫£i m√£"/>
                </div>
                <button id="decryptButton" class="btn-primary">üîì Gi·∫£i M√£</button>
                
                <div id="decryptResult" class="result-section" style="display: none;">
                    <h3>‚úÖ Gi·∫£i M√£ Th√†nh C√¥ng!</h3>
                    <div class="decrypted-message">
                        <label>Tin nh·∫Øn g·ªëc:</label>
                        <div id="decryptedMessage" class="message-box"></div>
                    </div>
                </div>
                
                <div id="decryptError" class="error-section" style="display: none;">
                    <h3>‚ùå Gi·∫£i M√£ Th·∫•t B·∫°i!</h3>
                    <p id="errorMessage"></p>
                </div>
            </div>
        </div>

        <!-- Tab 3: Qu√©t QR Code -->
        <div id="scanner-tab" class="tab-content">
            <div class="section">
                <h2>Qu√©t QR Code</h2>
                <p>S·ª≠ d·ª•ng camera ƒë·ªÉ qu√©t QR Code ch·ª©a tin nh·∫Øn ƒë√£ m√£ h√≥a</p>
                
                <div id="qr-reader" style="width: 100%;"></div>
                <button id="startScanButton" class="btn-primary">üì∑ B·∫Øt ƒê·∫ßu Qu√©t</button>
                <button id="stopScanButton" class="btn-secondary" style="display: none;">‚èπÔ∏è D·ª´ng Qu√©t</button>
                
                <div id="scanResult" class="result-section" style="display: none;">
                    <h3>üì± QR Code ƒê√£ Qu√©t!</h3>
                    <div class="form-group">
                        <label>Tin nh·∫Øn ƒë√£ m√£ h√≥a:</label>
                        <textarea id="scannedData" readonly rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="scanDecryptKey">üîë Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ gi·∫£i m√£:</label>
                        <input type="password" id="scanDecryptKey" placeholder="M·∫≠t kh·∫©u"/>
                    </div>
                    <button id="decryptScannedButton" class="btn-primary">üîì Gi·∫£i M√£</button>
                    
                    <div id="scannedDecryptResult" class="decrypted-message" style="display: none;">
                        <label>Tin nh·∫Øn g·ªëc:</label>
                        <div id="scannedDecryptedMessage" class="message-box"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 4: L·ªãch s·ª≠ -->
        <div id="history-tab" class="tab-content">
            <div class="section">
                <h2>L·ªãch S·ª≠ Tin Nh·∫Øn</h2>
                <div class="history-controls">
                    <button id="clearHistory" class="btn-secondary">üóëÔ∏è X√≥a T·∫•t C·∫£</button>
                    <button id="exportHistory" class="btn-secondary">üì• Xu·∫•t File</button>
                </div>
                <div id="historyList" class="history-list">
                    <p class="empty-state">üì≠ Ch∆∞a c√≥ tin nh·∫Øn n√†o trong l·ªãch s·ª≠</p>
                </div>
            </div>
        </div>

        <!-- Tab 5: C√†i ƒë·∫∑t -->
        <div id="settings-tab" class="tab-content">
            <div class="section">
                <h2>C√†i ƒê·∫∑t ·ª®ng D·ª•ng</h2>
                
                <div class="settings-group">
                    <h3>üé® Giao Di·ªán</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="darkMode" />
                            <span>üåô Ch·∫ø ƒë·ªô t·ªëi (Dark Mode)</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>Ch·ªß ƒë·ªÅ m√†u s·∫Øc:</label>
                        <select id="themeColor">
                            <option value="purple">üíú T√≠m (M·∫∑c ƒë·ªãnh)</option>
                            <option value="blue">üíô Xanh d∆∞∆°ng</option>
                            <option value="green">üíö Xanh l√°</option>
                            <option value="red">‚ù§Ô∏è ƒê·ªè</option>
                            <option value="orange">üß° Cam</option>
                        </select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>üîê B·∫£o M·∫≠t</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="autoLock" />
                            <span>üîí T·ª± ƒë·ªông kh√≥a sau khi kh√¥ng s·ª≠ d·ª•ng</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="clearClipboard" />
                            <span>üßπ T·ª± ƒë·ªông x√≥a clipboard sau 30 gi√¢y</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>M√£ h√≥a m·∫∑c ƒë·ªãnh:</label>
                        <select id="defaultEncryption">
                            <option value="aes">AES-256 (Khuy·∫øn ngh·ªã)</option>
                            <option value="tripledes">TripleDES</option>
                            <option value="rabbit">Rabbit</option>
                        </select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>üì± QR Code</h3>
                    <div class="setting-item">
                        <label>K√≠ch th∆∞·ªõc QR Code:</label>
                        <select id="qrSize">
                            <option value="128">Nh·ªè (128x128)</option>
                            <option value="256" selected>Trung b√¨nh (256x256)</option>
                            <option value="512">L·ªõn (512x512)</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>M√†u QR Code:</label>
                        <div class="color-picker-group">
                            <input type="color" id="qrColorDark" value="#000000" />
                            <span>M√†u t·ªëi</span>
                        </div>
                        <div class="color-picker-group">
                            <input type="color" id="qrColorLight" value="#ffffff" />
                            <span>M√†u s√°ng</span>
                        </div>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>üîî Th√¥ng B√°o</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="soundEffects" checked />
                            <span>üîä Hi·ªáu ·ª©ng √¢m thanh</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="notifications" />
                            <span>üîî Th√¥ng b√°o tr√¨nh duy·ªát</span>
                        </label>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>üìä Th·ªëng K√™</h3>
                    <div class="stats-container">
                        <div class="stat-item">
                            <span class="stat-label">Tin nh·∫Øn ƒë√£ m√£ h√≥a:</span>
                            <span class="stat-value" id="totalEncrypted">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Tin nh·∫Øn ƒë√£ gi·∫£i m√£:</span>
                            <span class="stat-value" id="totalDecrypted">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">QR Code ƒë√£ t·∫°o:</span>
                            <span class="stat-value" id="totalQR">0</span>
                        </div>
                    </div>
                </div>

                <button id="resetSettings" class="btn-secondary">üîÑ ƒê·∫∑t L·∫°i C√†i ƒê·∫∑t</button>
                <button id="saveSettings" class="btn-primary">üíæ L∆∞u C√†i ƒê·∫∑t</button>
            </div>
        </div>

        <!-- Share Modal -->
        <div id="shareModal" class="modal">
            <div class="modal-content">
                <span class="modal-close">&times;</span>
                <h2>üì§ Chia S·∫ª Tin Nh·∫Øn</h2>
                <div class="share-options">
                    <p>Link chia s·∫ª (tin nh·∫Øn s·∫Ω ƒë∆∞·ª£c gi·∫£i m√£ t·ª± ƒë·ªông khi m·ªü link):</p>
                    <div class="share-link-container">
                        <input type="text" id="shareLink" readonly />
                        <button id="copyShareLink" class="btn-secondary">üìã Sao ch√©p</button>
                    </div>
                    <p class="warning-text">‚ö†Ô∏è Ch√∫ √Ω: Link n√†y ch·ª©a m·∫≠t kh·∫©u, ch·ªâ chia s·∫ª qua k√™nh an to√†n!</p>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast"></div>

    </div>

    <!-- Load c√°c file JavaScript -->
    <script src="js/encryption.js"></script>
    <script src="js/qrcode.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
</body>
</html>